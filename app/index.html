<html>

<!--body onload="avvio()"-->

<body onload="avvio()">

  <h1>Cerca Insegnanti</h1>

  <script>

    async function cercaInsegnante() {

      const cont = document.getElementById('container');
      var select_città = document.getElementById('regioni');
      var città = select_città.options[select_città.selectedIndex].textContent;
      var select_materia = document.getElementById('materie');
      var materia = select_materia.options[select_materia.selectedIndex].textContent;
      //console.log(città, materia);
      const payload = {
        città: città,
        materia: materia
      };
      const response = await fetch('http://localhost:3000/get-insegnante', {
        method: "POST",
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(payload)
      });
      const jsonResponse = await response.json();

      const body = document.getElementById('body-tabella');
      dataHtml = "";

      for (let insegnante of jsonResponse) {
        dataHtml += "<tr><td>" + insegnante.nome + "</td><td>" + insegnante.cognome + "</td><td>" + insegnante.materie + "</td><td>" + insegnante.città + "</td></tr>";
      }
      body.innerHTML = dataHtml;

    }
/////////////////////////////////////////////////////////////////////////////////////
    /*async function avvio(){

      const select_regioni = document.getElementById('select-regioni');

      const payload = {
            città: "città",
            materia: "materia"
        };
      const response = await fetch('http://localhost:3000/get-select', {
            method: "POST",
           
        });

      const jsonResponse = await response.json();
      console.log(jsonResponse);

    }*/

  </script>

  <!--div class="regioni">
      <select id = "select-regioni">

      </select>
    </div-->
  <!--///////////////////////////////////////////////////////////////////////////////////////////////////////////////-->
  <div class="opzioni-ricerca">
    <div class="regioni">
      <p>Seleziona città:</p>
      <select id="regioni">
        <option value="PG">---</option>
        <optgroup label="Umbria">
          <option value="PG">Perugia</option>
          <option value="TR">Terni</option>
        </optgroup>
        <optgroup label="Piemonte">
          <option value="TO">Torino</option>
          <option value="VC">Vercelli</option>
          <option value="NO">Novara</option>
          <option value="CN">Cuneo</option>
          <option value="AT">Asti</option>
          <option value="AL">Alessandria</option>
          <option value="BI">Biella</option>
          <option value="VB">Verbano-Cusio-Ossola</option>
        </optgroup>
        <optgroup label="Valle d'Aosta">
          <option value="AO">Valle d'Aosta/Vallée d'Aoste</option>
        </optgroup>
        <optgroup label="Lombardia">
          <option value="VA">Varese</option>
          <option value="CO">Como</option>
          <option value="SO">Sondrio</option>
          <option value="MI">Milano</option>
          <option value="BG">Bergamo</option>
          <option value="BS">Brescia</option>
          <option value="PV">Pavia</option>
          <option value="CR">Cremona</option>
          <option value="MN">Mantova</option>
          <option value="LC">Lecco</option>
          <option value="LO">Lodi</option>
          <option value="MB">Monza e della Brianza</option>
        </optgroup>
        <optgroup label="Trentino-Alto Adige">
          <option value="BZ">Bolzano/Bozen</option>
          <option value="TN">Trento</option>
        </optgroup>
        <optgroup label="Veneto">
          <option value="VR">Verona</option>
          <option value="VI">Vicenza</option>
          <option value="BL">Belluno</option>
          <option value="TV">Treviso</option>
          <option value="VE">Venezia</option>
          <option value="PD">Padova</option>
          <option value="RO">Rovigo</option>
        </optgroup>
        <optgroup label="Friuli-Venezia Giulia">
          <option value="UD">Udine</option>
          <option value="GO">Gorizia</option>
          <option value="TS">Trieste</option>
          <option value="PN">Pordenone</option>
        </optgroup>
        <optgroup label="Liguria">
          <option value="IM">Imperia</option>
          <option value="SV">Savona</option>
          <option value="GE">Genova</option>
          <option value="SP">La Spezia</option>
        </optgroup>
        <optgroup label="Emilia-Romagna">
          <option value="PC">Piacenza</option>
          <option value="PR">Parma</option>
          <option value="RE">Reggio nell'Emilia</option>
          <option value="MO">Modena</option>
          <option value="BO">Bologna</option>
          <option value="FE">Ferrara</option>
          <option value="RA">Ravenna</option>
          <option value="FC">Forlì-Cesena</option>
          <option value="RN">Rimini</option>
        </optgroup>
        <optgroup label="Toscana">
          <option value="MS">Massa-Carrara</option>
          <option value="LU">Lucca</option>
          <option value="PT">Pistoia</option>
          <option value="FI">Firenze</option>
          <option value="LI">Livorno</option>
          <option value="PI">Pisa</option>
          <option value="AR">Arezzo</option>
          <option value="SI">Siena</option>
          <option value="GR">Grosseto</option>
          <option value="PO">Prato</option>
        </optgroup>
        <optgroup label="Marche">
          <option value="PU">Pesaro e Urbino</option>
          <option value="AN">Ancona</option>
          <option value="MC">Macerata</option>
          <option value="AP">Ascoli Piceno</option>
          <option value="FM">Fermo</option>
        </optgroup>
        <optgroup label="Lazio">
          <option value="VT">Viterbo</option>
          <option value="RI">Rieti</option>
          <option value="RM">Roma</option>
          <option value="LT">Latina</option>
          <option value="FR">Frosinone</option>
        </optgroup>
        <optgroup label="Abruzzo">
          <option value="AQ">L'Aquila</option>
          <option value="TE">Teramo</option>
          <option value="PE">Pescara</option>
          <option value="CH">Chieti</option>
        </optgroup>
        <optgroup label="Molise">
          <option value="CB">Campobasso</option>
          <option value="IS">Isernia</option>
        </optgroup>
        <optgroup label="Campania">
          <option value="CE">Caserta</option>
          <option value="BN">Benevento</option>
          <option value="NA">Napoli</option>
          <option value="AV">Avellino</option>
          <option value="SA">Salerno</option>
        </optgroup>
        <optgroup label="Puglia">
          <option value="FG">Foggia</option>
          <option value="BA">Bari</option>
          <option value="TA">Taranto</option>
          <option value="BR">Brindisi</option>
          <option value="LE">Lecce</option>
          <option value="BT">Barletta-Andria-Trani</option>
        </optgroup>
        <optgroup label="Basilicata">
          <option value="PZ">Potenza</option>
          <option value="MT">Matera</option>
        </optgroup>
        <optgroup label="Calabria">
          <option value="CS">Cosenza</option>
          <option value="CZ">Catanzaro</option>
          <option value="RC">Reggio di Calabria</option>
          <option value="KR">Crotone</option>
          <option value="VV">Vibo Valentia</option>
        </optgroup>
        <optgroup label="Sicilia">
          <option value="TP">Trapani</option>
          <option value="PA">Palermo</option>
          <option value="ME">Messina</option>
          <option value="AG">Agrigento</option>
          <option value="CL">Caltanissetta</option>
          <option value="EN">Enna</option>
          <option value="CT">Catania</option>
          <option value="RG">Ragusa</option>
          <option value="SR">Siracusa</option>
        </optgroup>
        <optgroup label="Sardegna">
          <option value="SS">Sassari</option>
          <option value="NU">Nuoro</option>
          <option value="CA">Cagliari</option>
          <option value="OR">Oristano</option>
          <option value="OT">Olbia-Tempio</option>
          <option value="OG">Ogliastra</option>
          <option value="VS">Medio Campidano</option>
          <option value="CI">Carbonia-Iglesias</option>
        </optgroup>
      </select>
    </div>
    <div class="materie">
      <p>Seleziona materia:</p>
      <select id="materie">
        <option value="TO">---</option>
        <option value="TO">Matematica</option>
        <option value="VC">Fisica</option>
        <option value="NO">Inglese</option>
        <option value="CN">Economia</option>
        <option value="AT">Informatica</option>
        <option value="AL">Chimica</option>
        <option value="BI">Latino</option>
      </select>
    </div>
    <br>
    <button class='button' onclick="cercaInsegnante()">Cerca Insegnante</button>
  </div>
  <br>
  <hr />
  <br>

  <!--div class='container' id='container'>
        <h1>Insegnanti disponibili</h1>
        <span>Nome: </span><h3 id='nome'>Anna Smith</h3>
        <hr />
        <span>Materia: </span><h3 id='materia'>anna.smith@example.com</h3>
        <hr />
        <span>Città: </span><h3 id='città'>coding</h3>
        <hr />
    </div-->
  <table class="tabella" id="tabella">
    <thead>
      <tr>
        <th>Nome</th>
        <th>Cognome</th>
        <th>Materie</th>
        <th>Città</th>
      </tr>
    </thead>

    <tbody id="body-tabella"></tbody>
  </table>
</body>

<style>
  table,
  body {
    font-family: arial, sans-serif;
    border-collapse: collapse;
    width: 100%;
  }

  td,
  th {
    border: 1px solid #CCCCCC;
    padding: 8px;
  }

  th {
    font-weight: bold;
    text-transform: uppercase;
  }

</style>

</html>